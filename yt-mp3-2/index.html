<html>
	<head>
		<link rel="icon">
	</head>
	<body class="body">
		<div style="top:50%;padding:20px;display:flex; flex-direction: column; align-items: center;">
			<input required id="vid" placeholder="Enter a valid YT videoID/URL" />
			<br>
			<button onclick="setAudioSource()">Go!</button>	
			<br>		
			<audio id="youtube" controls autoplay>
			</audio>
		</div>
		
		
		<script type="text/javascript">
				async function postData(url = '', data = {}) {
				  const response = await fetch(url, {
				    method: 'POST', 
				    headers: {
				      'Content-Type': 'application/json'
				    },
				    referrerPolicy: 'strict-origin-when-cross-origin', 
				    body: JSON.stringify(data)
				  });
				  return response.json(); // parses JSON response into native JavaScript objects
				}
			 function setAudioSource(){
			 	var id = document.getElementById("vid").value;
			 	postData('http://in.api.shareplay.ml/v2/getAudioURL', { "id": id })
				  .then(data => {
				    console.log(data); // JSON data parsed by `data.json()` call
				  });
			 	// fetch("https://yt-mp3-uri.herokuapp.com/api/mp3URL?id=" + id).then(response => {
			 	// 	if (response.ok) {
			 	// 		response.json().then(data => {
			 	// 			  var youtubeAudio = document.getElementById('youtube');
			 	// 	    	  youtubeAudio.src = data.message.uri;
			 	// 		});
			 	// 	}
			 	// });
			 }
			// function setAudioSource(){

			// 	var id = document.getElementById("vid").value;
			// 	var youtubeAudio = document.getElementById('youtube');
			//  	youtubeAudio.src = `https://yt-mp3-uri-node.herokuapp.com/getAudio?q=${id}`;

			// }
		</script>
	</body>
</html>